# See documentation on https://givelify15.atlassian.net/wiki/x/LADfc
---
notifications_slack_channel: "#core-services-notifications"
import_ansible_secrets: "False"
execute_smoke_tests: "False"
helm_repo_branch: main
helm_templates_repo_use_branch: "false"
helm_templates_repo_tag: v1.0.1

services:
  - service: google-locations
    template: service-app
    app:
      dockerfile: Dockerfile
    jobs:
      retrieve-gp-google-outlines:
        schedule: "0 0 1 7 *" # We only plan to run this manually, but a schedule is required
        command: ["python3", "-m", "app.scripts.outlines"]
        suspend: true # Only Manual run
      gp-geocoder:
        schedule: "0 0 1 7 *" # We only plan to run this manually, but a schedule is required
        command: ["python3", "-m", "app.scripts.donee_geocoder"]
        suspend: true # Only Manual run

components:
  - component: aws-resources
    sqs:
      default:
        create: true
        eventSubscription: false
        env: ["qa", "prod"]
    iamPolicies:
      sns:
        type: sns
        crossAccount: true
        access:
          - read
          - write
        resources:
          name:
            - master-event-bus.fifo
          envPrefix: true
  - component: database
    database: platform
  - component: database
    database: mono
  - component: custom-config
    defaults:
      DAILY_ITERATION_LIMIT: 1
